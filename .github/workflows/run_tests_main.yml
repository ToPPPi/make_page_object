#name: Run Tests
#
#on:
#  workflow_dispatch:  # Добавь эту строку для ручного запуска
#  push:
#    branches:
#      - main  # Запускать тесты только при пуше в ветку main
#  pull_request:
#    branches:
#      - main  # Запускать тесты при создании пул-реквеста в ветку main
#
#jobs:
#  test:
#    runs-on: ubuntu-latest  # Используем последнюю версию Ubuntu
#
#    steps:
#      - name: Checkout code
#        uses: actions/checkout@v3  # Клонируем репозиторий
#
#      - name: Set up Python
#        uses: actions/setup-python@v4
#        with:
#          python-version: "3.11"  # Указываем версию Python
#
#      - name: Install dependencies
#        run: |
#          python -m pip install --upgrade pip
#          pip install -r requirements.txt
#
#      - name: Install Allure CLI
#        run: |
#          sudo apt-get update
#          sudo apt-get install default-jre
#          wget https://github.com/allure-framework/allure2/releases/download/2.24.0/allure-2.24.0.tgz
#          tar -xzf allure-2.24.0.tgz
#          sudo mv allure-2.24.0 /opt/allure
#          sudo ln -s /opt/allure/bin/allure /usr/bin/allure
#
#      - name: Run tests
#        continue-on-error: true
#        run: |
#          pytest tests/ api/ -n 4 --alluredir=allure-results --maxfail=10  # Запускаем тесты и сохраняем результаты для Allure
#
#      - name: Generate Allure report
#        run: |
#          allure generate allure-results -o allure-report --clean  # Генерируем HTML-отчет
#
#      - name: Upload Allure report
#        uses: actions/upload-artifact@v3
#        with:
#          name: allure-report
#          path: allure-report  # Загружаем сгенерированный HTML-отчет